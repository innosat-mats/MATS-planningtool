procedure
	initiate and confirm step myStep
		main
			log "------------------------------------------------------------------------------------------------------------------";
			log "Starting tests";
			log to string (current time());

			initiate TC_pafMODE with arguments
				MODE:=2
			end with;

			wait for 5s;

			initiate TC_pcfPLTMControl with arguments
				Enable:=1,
				Partition:=0
			end with;

			wait for 5s;

			initiate TC_pafPWRTOGGLE with arguments
				CONST:=165
			end with;

			wait for 30s;

			initiate TC_pcfPLTMControl with arguments
				Enable:=1,
				Partition:=0
			end with;

			wait for 5s;

			log to string (current time());
			initiate TC_pafCCDBIAS with arguments
				CCDSEL:=127,
				VGATE:=0,
				VSUBST:=128,
				VRD:=126,
				VOD:=100
			end with;

			wait for 2s;

			log to string (current time());
			initiate TC_pafCCDFlushBadColumns with arguments
				CCDSEL:=127
			end with;

			wait for 2s;

			log to string (current time());
			initiate TC_pafCCDBadColumn with arguments
				CCDSEL:=1,
				NBC:=0
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafMODE with arguments
				MODE:=2
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafPM with arguments
				TEXPMS:=1500,
				TEXPIMS:=2000
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafCCD with arguments
				CCDSEL:=16,
				PWR:=0,
				WDW:=4,
				JPEGQ:=85,
				SYNC:=0,
				TEXPIMS:=5700,
				TEXPMS:=0,
				GAIN:=0,
				NFLUSH:=1023,
				NRSKIP:=95,
				NRBIN:=3,
				NROW:=107,
				NCSKIP:=23,
				NCBIN:=40,
				NCOL:=49,
				NCBINFPGA:=0,
				SIGMODE:=1
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafCCD with arguments
				CCDSEL:=32,
				PWR:=0,
				WDW:=4,
				JPEGQ:=85,
				SYNC:=0,
				TEXPIMS:=5700,
				TEXPMS:=0,
				GAIN:=0,
				NFLUSH:=1023,
				NRSKIP:=95,
				NRBIN:=3,
				NROW:=107,
				NCSKIP:=23,
				NCBIN:=40,
				NCOL:=49,
				NCBINFPGA:=0,
				SIGMODE:=1
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafCCD with arguments
				CCDSEL:=1,
				PWR:=1,
				WDW:=4,
				JPEGQ:=85,
				SYNC:=0,
				TEXPIMS:=5700,
				TEXPMS:=5000,
				GAIN:=0,
				NFLUSH:=1023,
				NRSKIP:=95,
				NRBIN:=2,
				NROW:=160,
				NCSKIP:=23,
				NCBIN:=40,
				NCOL:=49,
				NCBINFPGA:=0,
				SIGMODE:=1
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafCCD with arguments
				CCDSEL:=8,
				PWR:=1,
				WDW:=4,
				JPEGQ:=85,
				SYNC:=0,
				TEXPIMS:=5700,
				TEXPMS:=5000,
				GAIN:=0,
				NFLUSH:=1023,
				NRSKIP:=95,
				NRBIN:=2,
				NROW:=160,
				NCSKIP:=23,
				NCBIN:=40,
				NCOL:=49,
				NCBINFPGA:=0,
				SIGMODE:=1
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafCCD with arguments
				CCDSEL:=2,
				PWR:=1,
				WDW:=4,
				JPEGQ:=85,
				SYNC:=0,
				TEXPIMS:=5700,
				TEXPMS:=5000,
				GAIN:=0,
				NFLUSH:=1023,
				NRSKIP:=95,
				NRBIN:=6,
				NROW:=53,
				NCSKIP:=23,
				NCBIN:=200,
				NCOL:=9,
				NCBINFPGA:=0,
				SIGMODE:=1
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafCCD with arguments
				CCDSEL:=4,
				PWR:=1,
				WDW:=4,
				JPEGQ:=85,
				SYNC:=0,
				TEXPIMS:=5700,
				TEXPMS:=5000,
				GAIN:=0,
				NFLUSH:=1023,
				NRSKIP:=95,
				NRBIN:=6,
				NROW:=53,
				NCSKIP:=23,
				NCBIN:=200,
				NCOL:=9,
				NCBINFPGA:=0,
				SIGMODE:=1
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafCCD with arguments
				CCDSEL:=64,
				PWR:=1,
				WDW:=4,
				JPEGQ:=85,
				SYNC:=0,
				TEXPIMS:=2000,
				TEXPMS:=1500,
				GAIN:=0,
				NFLUSH:=1023,
				NRSKIP:=0,
				NRBIN:=36,
				NROW:=14,
				NCSKIP:=0,
				NCBIN:=36,
				NCOL:=55,
				NCBINFPGA:=0,
				SIGMODE:=1
			end with;

			wait for 2s;

			log "";
			log to string (current time());
			initiate TC_pafCCDSYNCHRONIZE with arguments
				CCDSEL:=15,
				NCCD:=4,
				TEXPIOFS:=0,
				TEXPIOFS:=1060,
				TEXPIOFS:=1410,
				TEXPIOFS:=530
			end with;

			wait for 22s;

			log "";
			log to string (current time());
			initiate TC_pafMODE with arguments
				MODE:=1
			end with;

		end main
	end step;
end procedure
